<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Check Auth State</title>
    <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-auth.js"></script>
</head>
<body>
    <!-- Sekcja logowania -->
    <div id="loginSection">
        <h2>Login</h2>
        <form id="loginForm">
            <input type="email" id="email" placeholder="Email" required>
            <input type="password" id="password" placeholder="Password" required>
            <button type="submit">Login</button>
        </form>
        <p id="loginError"></p>
    </div>

    <!-- Sekcja aplikacji -->
    <div id="appSection" style="display: none;">
        <h2>Welcome!</h2>
        <button id="logoutButton">Logout</button>
    </div>

    <script>
        // Konfiguracja Firebase
        const firebaseConfig = {
  apiKey: "AIzaSyDUO5c-1RSGpGspdAStcGmrEVb0qD0FbnU",
  authDomain: "emsd-cef45.firebaseapp.com",
  databaseURL: "https://emsd-cef45-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "emsd-cef45",
  storageBucket: "emsd-cef45.firebasestorage.app",
  messagingSenderId: "573007211940",
  appId: "1:573007211940:web:651a9d8785eb14a0ea2531"
        };

        // Inicjalizacja Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        // Nasłuchuj stanu logowania
        auth.onAuthStateChanged((user) => {
            if (user) {
                // Użytkownik jest zalogowany
                console.log("Zalogowany jako:", user.email);
                document.getElementById("loginSection").style.display = "none";
                document.getElementById("appSection").style.display = "block";
            } else {
                // Brak zalogowanego użytkownika
                console.log("Użytkownik nie jest zalogowany.");
                document.getElementById("loginSection").style.display = "block";
                document.getElementById("appSection").style.display = "none";
            }
        });

        // Logowanie użytkownika
        document.getElementById("loginForm").addEventListener("submit", (e) => {
            e.preventDefault();
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;

            auth.signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    console.log("Zalogowano:", userCredential.user.email);
                })
                .catch((error) => {
                    console.error("Błąd logowania:", error.message);
                    document.getElementById("loginError").innerText = error.message;
                });
        });

        // Wylogowanie użytkownika
        document.getElementById("logoutButton").addEventListener("click", () => {
            auth.signOut().then(() => {
                console.log("Wylogowano.");
            }).catch((error) => {
                console.error("Błąd wylogowania:", error.message);
            });
        });
		
		import { getDatabase, ref, set } from "firebase/database";

// Połącz się z Realtime Database
const db = getDatabase();

// Test: Dodanie danych do bazy
set(ref(db, 'test-path'), { test: "Firebase działa!" })
    .then(() => console.log("Połączono z Realtime Database i dodano dane!"))
    .catch((error) => console.error("Błąd połączenia z Realtime Database:", error.message));

		
    </script>
</body>
</html>
